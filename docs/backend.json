{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile and personal information for resume generation.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "phone": {
          "type": "string",
          "description": "User's phone number."
        },
        "address": {
          "type": "string",
          "description": "User's street address."
        },
        "city": {
          "type": "string",
          "description": "User's city."
        },
        "state": {
          "type": "string",
          "description": "User's state."
        },
        "zipCode": {
          "type": "string",
          "description": "User's zip code."
        },
        "linkedinUrl": {
          "type": "string",
          "description": "User's LinkedIn profile URL.",
          "format": "uri"
        },
        "githubUrl": {
          "type": "string",
          "description": "User's GitHub profile URL.",
          "format": "uri"
        },
        "credits": {
          "type": "number",
          "description": "The number of free optimizations the user has remaining."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email"
      ]
    },
    "JobApplication": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "JobApplication",
      "type": "object",
      "description": "Represents a single job application created by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the job application."
        },
        "userId": {
          "type": "string",
          "description": "The ID of the user who owns this application."
        },
        "jobTitle": {
          "type": "string",
          "description": "The title of the job."
        },
        "companyName": {
          "type": "string",
          "description": "The name of the company."
        },
        "status": {
          "type": "string",
          "description": "The current status of the application.",
          "enum": [
            "Applied",
            "Interviewing",
            "Accepted",
            "Rejected"
          ]
        },
        "applicationDate": {
          "type": "string",
          "description": "The date the application was created.",
          "format": "date-time"
        },
        "resumeText": {
          "type": "string",
          "description": "The original resume text used for this application."
        },
        "jobDescriptionText": {
          "type": "string",
          "description": "The job description text for this application."
        },
        "optimizedResumeHtml": {
          "type": "string",
          "description": "The generated optimized resume in HTML format."
        },
        "coverLetterHtml": {
          "type": "string",
          "description": "The generated cover letter in HTML format."
        },
        "interviewQuestionsHtml": {
          "type": "string",
          "description": "The generated interview questions and answers in HTML format."
        },
        "followUpEmailHtml": {
          "type": "string",
          "description": "The generated follow-up email in HTML format."
        }
      },
      "required": [
        "id",
        "userId",
        "jobTitle",
        "companyName",
        "status",
        "applicationDate",
        "resumeText",
        "jobDescriptionText"
      ]
    }
  },
  "auth": {
    "providers": [
      "google.com"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profile information. Each user has their own document.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/applications/{applicationId}",
        "definition": {
          "entityName": "JobApplication",
          "schema": {
            "$ref": "#/backend/entities/JobApplication"
          },
          "description": "Stores individual job applications for a user.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "applicationId",
              "description": "The unique identifier for the job application."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to ensure data ownership and efficient querying. User profiles are stored under `/users/{userId}`. All job applications for a user are stored in a subcollection `/users/{userId}/applications` to maintain ownership and allow for easy listing of a user's applications without complex queries. This structure facilitates secure `list` operations based on the user's ID."
  }
}
